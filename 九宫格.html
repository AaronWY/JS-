<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>九宫格</title>
    <style>
        td{width: 100px;height: 100px;background-color: red; border-radius: 9px;border:3px;}
        .bar{width: 309px;height: 30px;background-color: yellow; margin-top: 9px;border-radius: 9px;text-align: center;}
    </style>

</head>
<body>
    <table>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr> 
    </table>
    <button class="bar" onclick="start()">start</button><br>
    <button class="bar"  onclick="stop()">stop</button>
<script>
    var i= document.getElementsByTagName("td");
    let time1;
    let k=[];
    function random(len, start, end) {
    　　var arr = [];
    　　function creat(start, end) {
    　　　　var numlen= end - start;
    　　　　return parseInt(Math.random() * numlen+ start)
    　　}
    　　while (arr.length < len) {
    　　　　var num = creat(start, end);
    　　　　　　if (arr.indexOf(num) == -1) {
    　　　　　　　　arr.push(num);
    　　　　　　}
    　　}
    　　　　return arr;
    }


    function bgchange(){
        setTimeout("recover()",900);
        k=random(3,0,9);
        for(j=0;j<k.length;j++){
            var rand="#"+ Math.round(Math.random()*1000000);
            do{
                rand="#"+ Math.round(Math.random()*1000000);
            i[k[j]].style.backgroundColor=rand;
            }
            while(i[k[j]].style.backgroundColor == "red");

            
        console.log(k)
        }
    }
    function recover(){
        for(j=0;j<k.length;j++){
            i[k[j]].style.backgroundColor='red'
        }

    }
    function start(){
     time1 = setInterval("bgchange()",1000);
     document.getElementsByTagName("button")[0].disabled=true;
    }
    function stop(){
        clearInterval(time1);
        for(j=0;j<k.length;j++){
            i[k[j]].style.backgroundColor='red'
        }
        document.getElementsByTagName("button")[0].disabled=false;
    }
    
</script>
</body>
</html>
